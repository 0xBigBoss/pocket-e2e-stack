version: "3.5"

services:
  gateway:
    container_name: pokt-fdt-gw
    env_file:
      - ./.gateway.env
    volumes:
      - "${GATEWAY_REPO_PATH}/src:/usr/src/gateway/src:rw"
      - "${GATEWAY_REPO_PATH}/dist:/usr/src/gateway/dist:rw"
    ports:
      - 3000:3000
    networks:
      - pocket
    depends_on:
      - db
      - cache
      - metricsdb
      - fullnode.pokt.dev.local

  db:
    networks:
      - pocket

  cache:
    networks:
      - pocket

  metricsdb:
    networks:
      - pocket

  fullnode.pokt.dev.local:
    networks:
      - pocket
    depends_on:
      - ipfs

  ipfs:
    networks:
      - pocket

networks:
  pocket:
    name: pocket

volumes:
  shared:
